{"ast":null,"code":"import React,{useState}from'react';import'./index.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[image,setImage]=useState(null);const[result,setResult]=useState('');const[loading,setLoading]=useState(false);const handleImageChange=e=>{const file=e.target.files[0];const reader=new FileReader();reader.onloadend=()=>{setImage(reader.result.split(',')[1]);};if(file)reader.readAsDataURL(file);};const handleAnalyze=async()=>{if(!image)return alert('이미지를 업로드해주세요.');setLoading(true);try{const response=await fetch('http://127.0.0.1:5000/analyze',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({image,caption:''})});const data=await response.json();setResult(data.result);}catch(err){alert('분석 실패');console.error(err);}finally{setLoading(false);}};const extractAnalysis=text=>{const scoreMatch=text.match(/싫어하지 않을 확률:\\s*(\\d+)/);const warningMatch=text.match(/경고:\\s*(.*)/);const recommendationMatch=text.match(/추천:\\s*(.*)/);const score=scoreMatch?parseInt(scoreMatch[1],10):null;const warning=warningMatch?warningMatch[1].trim():null;const recommendation=recommendationMatch?recommendationMatch[1].trim():null;return{score,warning,recommendation};};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-indigo-200 via-purple-300 to-blue-300 flex items-center justify-center px-4 py-12 text-gray-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-3xl shadow-2xl p-10 max-w-md w-full\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-extrabold text-center text-indigo-700 mb-2 tracking-tight\",children:\"SafePost \\uD83C\\uDF1F\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-sm text-gray-500 mb-8\",children:\"\\uC5C5\\uB85C\\uB4DC \\uC804\\uC5D0, \\uB2F9\\uC2E0\\uC758 \\uAC8C\\uC2DC\\uBB3C\\uC744 \\uC548\\uC804\\uD558\\uAC8C \\uC810\\uAC80\\uD558\\uC138\\uC694.\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"border-2 border-dashed border-gray-300 rounded-xl p-5 w-full text-center cursor-pointer hover:border-indigo-400 transition block\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageChange,className:\"hidden\"}),image?'✅ 이미지 선택 완료':'📷 여기에 이미지를 업로드해보세요']}),image&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 rounded-xl overflow-hidden shadow-md animate-fade-in\",children:/*#__PURE__*/_jsx(\"img\",{src:`data:image/jpeg;base64,${image}`,alt:\"\\uC5C5\\uB85C\\uB4DC\\uB41C \\uC774\\uBBF8\\uC9C0\",className:\"w-full object-cover max-h-96\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAnalyze,disabled:loading,className:\"mt-6 bg-indigo-600 hover:bg-indigo-700 text-white w-full py-3 rounded-xl text-lg font-semibold transition\",children:loading?'분석 중...':'✨ 분석하기'}),result&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 bg-gray-100 p-5 rounded-xl\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-3\",children:\"\\uD83D\\uDCCA \\uBD84\\uC11D \\uACB0\\uACFC\"}),(()=>{const{score,warning,recommendation}=extractAnalysis(result);if(score!==null&&warning&&recommendation){return/*#__PURE__*/_jsxs(\"pre\",{className:\"whitespace-pre-wrap text-sm font-medium text-gray-700\",children:[\"\\uD83D\\uDCCA \\uC774 \\uAC8C\\uC2DC\\uBB3C\\uC740 \",score,\"% \\uD655\\uB960\\uB85C \\uC548\\uC804\\uD569\\uB2C8\\uB2E4. \\uD83D\\uDED1 \\uACBD\\uACE0: \",warning,\"\\u2728 \\uCD94\\uCC9C: \",recommendation]});}else{return/*#__PURE__*/_jsx(\"pre\",{className:\"text-sm text-red-500\",children:\"\\uACB0\\uACFC\\uB97C \\uBD88\\uB7EC\\uC62C \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"});}})()]})]})});}export default App;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","App","image","setImage","result","setResult","loading","setLoading","handleImageChange","e","file","target","files","reader","FileReader","onloadend","split","readAsDataURL","handleAnalyze","alert","response","fetch","method","headers","body","JSON","stringify","caption","data","json","err","console","error","extractAnalysis","text","scoreMatch","match","warningMatch","recommendationMatch","score","parseInt","warning","trim","recommendation","className","children","type","accept","onChange","src","alt","onClick","disabled"],"sources":["C:/Users/tjrkd_0alrjt7/Desktop/safepost/ig-front/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport './index.css';\n\nfunction App() {\n  const [image, setImage] = useState(null);\n  const [result, setResult] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      setImage(reader.result.split(',')[1]);\n    };\n    if (file) reader.readAsDataURL(file);\n  };\n\n  const handleAnalyze = async () => {\n    if (!image) return alert('이미지를 업로드해주세요.');\n    setLoading(true);\n    try {\n      const response = await fetch('http://127.0.0.1:5000/analyze', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ image, caption: '' })\n      });\n      const data = await response.json();\n      setResult(data.result);\n    } catch (err) {\n      alert('분석 실패');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const extractAnalysis = (text) => {\n    const scoreMatch = text.match(/싫어하지 않을 확률:\\s*(\\d+)/);\n    const warningMatch = text.match(/경고:\\s*(.*)/);\n    const recommendationMatch = text.match(/추천:\\s*(.*)/);\n\n    const score = scoreMatch ? parseInt(scoreMatch[1], 10) : null;\n    const warning = warningMatch ? warningMatch[1].trim() : null;\n    const recommendation = recommendationMatch ? recommendationMatch[1].trim() : null;\n\n    return { score, warning, recommendation };\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-indigo-200 via-purple-300 to-blue-300 flex items-center justify-center px-4 py-12 text-gray-800\">\n      <div className=\"bg-white rounded-3xl shadow-2xl p-10 max-w-md w-full\">\n        <h1 className=\"text-4xl font-extrabold text-center text-indigo-700 mb-2 tracking-tight\">SafePost 🌟</h1>\n        <p className=\"text-center text-sm text-gray-500 mb-8\">업로드 전에, 당신의 게시물을 안전하게 점검하세요.</p>\n\n        <label className=\"border-2 border-dashed border-gray-300 rounded-xl p-5 w-full text-center cursor-pointer hover:border-indigo-400 transition block\">\n          <input type=\"file\" accept=\"image/*\" onChange={handleImageChange} className=\"hidden\" />\n          {image ? '✅ 이미지 선택 완료' : '📷 여기에 이미지를 업로드해보세요'}\n        </label>\n\n        {image && (\n          <div className=\"mt-6 rounded-xl overflow-hidden shadow-md animate-fade-in\">\n            <img\n              src={`data:image/jpeg;base64,${image}`}\n              alt=\"업로드된 이미지\"\n              className=\"w-full object-cover max-h-96\"\n            />\n          </div>\n        )}\n\n        <button\n          onClick={handleAnalyze}\n          disabled={loading}\n          className=\"mt-6 bg-indigo-600 hover:bg-indigo-700 text-white w-full py-3 rounded-xl text-lg font-semibold transition\"\n        >\n          {loading ? '분석 중...' : '✨ 분석하기'}\n        </button>\n\n        {result && (\n          <div className=\"mt-8 bg-gray-100 p-5 rounded-xl\">\n            <h3 className=\"text-xl font-semibold mb-3\">📊 분석 결과</h3>\n\n            {(() => {\n              const { score, warning, recommendation } = extractAnalysis(result);\n              if (score !== null && warning && recommendation) {\n                return (\n                  <pre className=\"whitespace-pre-wrap text-sm font-medium text-gray-700\">\n📊 이 게시물은 {score}% 확률로 안전합니다.\n🛑 경고: {warning}\n✨ 추천: {recommendation}\n                  </pre>\n                );\n              } else {\n                return <pre className=\"text-sm text-red-500\">결과를 불러올 수 없습니다.</pre>;\n              }\n            })()}\n\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}